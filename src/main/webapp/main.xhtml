<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h2>Синхронизация SKU</h2>
	<h:form id="form" enctype="multipart/form-data" rendered="#{loginBean.loggedIn}">
	
		<h:inputFile id="file" value="#{skuMain.file}"/>
	 	<br></br>
	 	<h:commandButton value="Загрузить файл SKU_BASE_1C.xls ..."
      		action="#{skuMain.checkXLSFile()}">
    		<f:ajax execute="file" render="@all"/>
  		</h:commandButton>
  		</h:form>
<!--   		<br></br> -->
  		<h:messages id="messages" errorClass="err" warnClass="warn" infoClass="info" style="color: #FF8080" showDetail="true" showSummary="true"/>
<!--   		<br></br> -->
  		<h:panelGrid columns="2">
  		<h:selectBooleanCheckbox value="#{skuMain.fileUploaded}" id="Uploadcheckbox">
		</h:selectBooleanCheckbox>
		 <h:outputLabel value="XLS-файл успешно загружен" for="Uploadcheckbox" />
  		<h:selectBooleanCheckbox value="#{skuMain.uploadedXLSValidationResult}" id="XLScheckbox">
		</h:selectBooleanCheckbox>
		 <h:outputLabel value="XLS-файл успешно проверен" for="XLScheckbox" />
		 </h:panelGrid>
		
		<h:form id="buttons" enctype="multipart/form-data" rendered="#{loginBean.loggedIn}">
		<h:link value="Обработать файл SKU_BASE_1C.xls ..." outcome="xlsprocessor" 
		rendered="#{skuMain.fileUploaded and skuMain.uploadedXLSValidationResult}"></h:link>
		<h:commandButton value="Выход" rendered="#{loginBean.loggedIn}"
		action="#{loginBean.logout}"></h:commandButton>
		<br></br>
		</h:form>
		<h:panelGrid columns="1"  rendered="#{not empty skuMain.exceptionString}">
		<h:outputLabel value="Журнал ошибок"></h:outputLabel>
		<h:inputTextarea value="#{skuMain.exceptionString}"
      		readonly="true" cols="130" rows="40"/>
      	</h:panelGrid>	
	
</html>
