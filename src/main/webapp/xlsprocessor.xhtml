<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">


	<h2>Работа с данными в XLS-файле</h2>
	<h:panelGrid columns="1" rows="2">
	<h:outputLabel value="Переименованные SKU. Они были переименованы в базе данных.">
	</h:outputLabel>
		<h:outputLabel value="Для переименования SKU в файле отметьте необходимые строки флажками.">
	</h:outputLabel>
	</h:panelGrid>
	    <h:form id="buttons" enctype="multipart/form-data" rendered="#{XLSProcessorController.sessionManager.loggedIn}">
	    <h:dataTable border="1" var = "s" value="#{XLSProcessorController.skuRename}">
	    	<h:column id="Selected">
	    		<f:facet name="header" >
				<h:outputText value="Выбор"></h:outputText>
				</f:facet>
				<h:selectBooleanCheckbox value="#{s.checked}">
				</h:selectBooleanCheckbox>
	    	</h:column>
	    	<h:column id="Key">
				<f:facet name="header" >
				<h:outputText value="Ключ"></h:outputText>
				</f:facet>
			<h:outputText value="#{s.key}">
			</h:outputText>	
			</h:column>
			<h:column id="Before">
				<f:facet name="header" >
					<h:outputText value="До"></h:outputText>
				</f:facet>
				<h:outputText value="#{s.before}">
				</h:outputText>	
			</h:column>
			<h:column id="After">
				<f:facet name="header" >
					<h:outputText value="После"></h:outputText>
				</f:facet>
				<h:outputText value="#{s.after}">
				</h:outputText>			
			</h:column>
	    </h:dataTable>
	    <h:outputLabel value="Переименованных SKU нет." rendered="#{empty XLSProcessorController.skuRename}" style="font-style: italic"></h:outputLabel>
	    <br></br>
	    <h:panelGrid columns="1" rows="2">
	    <h:outputLabel value="Отсутствующие SKU. Их нет в базе данных.">
	    </h:outputLabel>
	    <h:outputLabel value="Для удаления соответствующих строк в файле отметьте их флажками.">
	    </h:outputLabel>
	    </h:panelGrid>
	    
	    <h:dataTable border="1" var = "s" value="#{XLSProcessorController.doesNotExist}">
	    	<h:column id="Selected">
	    		<f:facet name="header" >
				<h:outputText value="Выбор"></h:outputText>
				</f:facet>
				<h:selectBooleanCheckbox value="#{s.checked}">
				</h:selectBooleanCheckbox>
	    	</h:column>	    
	    	<h:column id="Key">
				<f:facet name="header" >
				<h:outputText value="Ключ"></h:outputText>
			</f:facet>
			<h:outputText value="#{s.key}">
			</h:outputText>	
			</h:column>
			<h:column id="Before">
				<f:facet name="header" >
					<h:outputText value="До"></h:outputText>
				</f:facet>
				<h:outputText value="#{s.before}">
				</h:outputText>	
			</h:column>
			<h:column id="After">
				<f:facet name="header" >
					<h:outputText value="После"></h:outputText>
				</f:facet>
				<h:outputText value="#{s.after}">
				</h:outputText>			
			</h:column>
	    </h:dataTable>
	    <h:outputLabel value="Удалённых SKU нет." rendered="#{empty XLSProcessorController.doesNotExist}" style="font-style: italic"></h:outputLabel>
	    <h:panelGrid columns="1">
	    <h:commandButton value="Применить, сохранить изменения в файле и перейти далее" 
		action="#{XLSProcessorController.commitXLSChanges}"></h:commandButton>
		<h:commandButton value="Перейти далее без сохранения" 
		action="#{XLSProcessorController.goToDBProcessor}"></h:commandButton>
		<h:commandButton value="Выход" rendered="#{XLSProcessorController.sessionManager.loggedIn}"
		action="#{loginBean.logout}"></h:commandButton>
		</h:panelGrid>
		</h:form>
		<br></br>
		<h:panelGrid columns="1"  rendered="#{not empty XLSProcessorController.exceptionString}">
	    <h:outputLabel value="Журнал ошибок"></h:outputLabel>
	    <h:inputTextarea value="#{XLSProcessorController.exceptionString}" 
      		readonly="true" cols="130" rows="40"/>
		</h:panelGrid>


</html>
